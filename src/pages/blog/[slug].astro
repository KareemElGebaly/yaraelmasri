---
import { getEntryBySlug } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const { slug } = Astro.params;
const post = await getEntryBySlug('posts', slug);

if (!post) {
  throw new Error(`Post not found for slug: ${slug}`);
}
---

<Layout title={post.data.title} description={post.data.description}>
  <article style="max-width: 700px; margin: 0 auto; padding: 2rem 1rem;">
    <h1 style="text-align: center; font-size: 2rem;">{post.data.title}</h1>
    <p style="text-align: center; color: #777;">ðŸ“… {new Date(post.data.pubDate).toLocaleDateString('ar-EG')}</p>
    
    {post.data.image && (
      <img src={post.data.image} alt={post.data.title} style="max-width: 100%; margin: 2rem 0; border-radius: 12px;" />
    )}

    <div class="post-body" set:html={post.body}></div>
  </article>
</Layout>